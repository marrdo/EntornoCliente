<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Práctica de Preguntas Moodle</title>
	<meta name='Generator' content='Zim 0.75.1'>
	<style type='text/css'>
	    @import url('https://fonts.googleapis.com/css2?family=Montserrat&family=Jost&display=swap');
	    :root {
  			--html-background-color: #456;
  			--html-background-color-image: linear-gradient( 0deg, rgba(24,95,240,1) 16.4%, rgba(5,23,111,1) 70% );
  			
  			--main-color: #47b;
  			--main-background-color: #fff;
  			
  			--heading1-color-text: #eeffff;
  			--heading1-background-color: #47b;
  			--heading1-background-image: linear-gradient(to right, var(--main-color), #70bbdd);
  			
  			--code-color-text: #247;
  			
  			--input-background-color: #33a;
  			--input-background-color-hover: #44b

		}

	    html       { /*background-image: linear-gradient(#f2faff,#fff);*/
background-color: var(--html-background-color);
background-image: var(--html-background-color-image);
	    }
	    body       { font-family: 'Jost', 'Noto', 'Arial', 'Sans-serif';
	    				margin:0;
	                 }
	    div#contenido{
	    	margin: 0 auto; padding: 1rem; max-width: 90ch;
	    	background-color: var(--main-background-color);
	    	margin-bottom: 200px;
	    	border-bottom-right-radius: 100px;
			border-bottom: 5px solid darkblue;
			box-shadow: 0px 10px 10px -1px #1e90ff10, 
						  10px 30px 20px -1px #1e90ff40, 
						 -10px 30px 20px -1px #1e90ff40;			
	    }
	    input[type="button"]{
	                 background-color: var(--input-background-color);
                     color: white;
                     border-radius: 5px;
                     border: 3px solid #44b;
                     cursor: pointer;
                     padding: 0.5rem;
                     margin-left: 0.5rem;
                     margin-right: 0.5rem;
                     transition: margin-all 3s ease-in-out 3s;
        }
        input[type="button"]:hover{
	                 background-color: var(--input-background-color-hover);
        }
        input[type="button"]:active {
			  transform: translateY(2px);
			  cursor: progress;
		  }
		a,a:visited  { text-decoration: none;color:blue;      }
		a:hover    { text-decoration: underline; color: dodgerblue; }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: var(--code-color-text);
				    	 font-size: large;
		             background-color: rgba(.99, .99, 1, 0.1); 
		           }
		pre        { color: var(--code-color-text);
		             background-color: rgba(.99, .99, 1, 0.1);
					 padding: 20px;
					 font-size: large;
				   }
		div.zim-object pre        {
		             background-color: white;
					 padding: 0px;
				   }				   
		h1         { font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             text-decoration: none;
					 /*color: #33a;
					 border-bottom: 5px dotted #33a;*/
					 /*margin-top: 2rem; 
					 margin-bottom: 1rem; 
					 
					 border-radius: 5px;
					 padding: 5px;
					 color: var(--heading1-color-text);
					 background-color: var(--heading1-background-color);
					 background-image: var(--heading1-background-image);
					 
					 font-size: xxx-large;*/
					font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
					text-decoration: none;
					margin-top: 2rem;
					margin-bottom: 2rem;
					border-radius: 2px;
					padding: 5px;
					color: var(--heading1-color-text);
					background-color: var(--heading1-background-color);
					background-image: linear-gradient(45deg, #0bb,#3fb,#78F);
					font-size: xxx-large;
					position: relative;
					z-index: 1;
					box-shadow: 5px 5px 0px 2px rebeccapurple;
				   }
	h1::before {
		  content: '';
		  position: absolute;
		  background-color: navy;
			transform: skewY(-8deg) rotate(7deg);
			top: -16px;
			left: 0;
			right: 0;
			bottom: 16px;
			z-index: -1; /*detrás del texto, pero delante del fondo */
	  }
		h2         { font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color); 
		             margin-bottom: 0.5rem;
		             margin-top: 1.5rem;
		             font-size: xx-large;
		             border-bottom: 2px solid var(--heading1-background-color);
		           }
		h3         { 
		             font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color); 
		             margin-bottom: 0.5rem;
		             margin-top: 1.5rem;
		             font-size: x-large;
		             font-style: italic;
		             margin-left: 0.5rem; 
		           }
		h4         { 
		             font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color); 
		             margin-bottom: 0.5rem;
		             margin-top: 1.5rem;
		             margin-left: 1rem;
		             filter: brightness(1.1);
		           }
		h5         { 
		             font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color);  
		             margin-bottom: 0.5rem; 
		             margin-top: 1.5rem;
		             filter: brightness(1.1);
		           }
		p          { margin-top: 0.25rem;  }
		span.zim-tag {
			color: #ce5c00;
		}
		img{
		    scale: 75%;
		    max-width:100%;
		    margin: 0 auto; /* para centrar las imágenes */
			 display: flex; /* para centrar las imágenes */
		}
		img:hover{
		    scale: 100%;
		    max-width:100%;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		form{
            padding: 0.5rem;
            background-color: #125;
            border-radius: 0px;
            text-align: center;
            margin-bottom: 1rem;
		}
		ul{
		    list-style-type: '▪️ '; /*square*/
		}
		div#sumario{
            margin: 0 auto; 
            padding: 1rem; 
            max-width: 90ch;
            background-color: aquamarine; /*greenyellow;/*moccasin;*/
/*            background-image: radial-gradient( circle farthest-corner at 10% 20%,  rgba(166,239,253,1) 0%, rgba(97,186,255,1) 90.1% );
*/
				background-position:bottom;
				background-repeat: no-repeat;
				background-image: url('data:image/svg+xml, <svg preserveAspectRatio="none" viewBox="0 0 1200 120" xmlns="http://www.w3.org/2000/svg" style="fill: %23ffffff; width: 100%; height: 180px; transform: rotate(180deg);" ><path d="M321.39 56.44c58-10.79 114.16-30.13 172-41.86 82.39-16.72 168.19-17.73 250.45-.39C823.78 31 906.67 72 985.66 92.83c70.05 18.48 146.53 26.09 214.34 3V0H0v27.35a600.21 600.21 0 00321.39 29.09z" /></svg>');

            /*border-radius: 0px;*/
            border-top-right-radius: 152px;
		}
		div#sumario a {
			color:#0000dd;
		}
		div#sumario h1{
			margin-right: 300px;
			text-align: center;
			box-shadow: 5px 5px 0px 2px white;
		}
		div#volver{
		    position: fixed;
            right: 0.5rem;
            bottom: 0.5rem;
            padding: 0.5rem;
            border: 3px solid #7af;
            border-radius: 50%;
		}
		div#volver:hover {
			filter: brightness(1.2) saturate(1.2);
		}
		div#pie{
			min-height: 200px; 
			/*background-color: #47b;*/
			color: #cef;
			display: flex; 
			justify-content: center; 
			align-items: center; 
			position: fixed; 
			bottom:0; left:0; right: 0;
			z-index: -1;
			background-image: linear-gradient( 0deg, rgba(0,0,0,0.6) 0%, rgba(255,255,255,0) 100% );
			font-size: larger;
			text-align:center;
		}
		div#pie a{
			color: deepskyblue;
		}
		pre.codigo{
			border: 1px solid blue;
			padding: 5px;
			background-color: aliceblue;
			border-radius: 5px;
		}
		
		div.codigoresultado{
			background-color: #469;
			color: whitesmoke;
			padding: 5px;
			border-radius: 5px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */
	</style>
	
	<!-- resaltado de sintaxis -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
	<!-- and it's easy to individually load additional languages -->
	<!-- script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/php.min.js"></script -->


</head>
<body>
    <form>
    <input type="button" id="btnAmpliar" value="Ampliar margen">
    <input type="button" id="btnReducir" value="Reducir margen">
    <input type="button" id="btnSumario" value="Ver/ocultar sumario">
    </form>


<div id="sumario" style="display:none">
<h1>Sumario</h1>
<!-- Sumario --> 
            <a href="#h1">Práctica de Preguntas Moodle</a> <br>
            &nbsp; &nbsp; <a href="#h2">Objetivo</a> <br>
            <a href="#h3">Web inicial</a> <br>
            &nbsp; &nbsp; <a href="#h4">Encabezado</a> <br>
            &nbsp; &nbsp; <a href="#h5">Advertencia</a> <br>
            &nbsp; &nbsp; <a href="#h6">Formulario</a> <br>
            &nbsp; &nbsp; <a href="#h7">División de las preguntas</a> <br>
            <a href="#h8">Funcionalidad</a> <br>
            &nbsp; &nbsp; <a href="#h9">Inicio de la aplicación</a> <br>
            &nbsp; &nbsp; <a href="#h10">El botón Borrar todas las preguntas</a> <br>
            &nbsp; &nbsp; <a href="#h11">El botón Crear pregunta</a> <br>
            &nbsp; &nbsp; <a href="#h12">Botón Recuperar pregunta</a> <br>
            &nbsp; &nbsp; <a href="#h13">Botón Descartar pregunta</a> <br>
            &nbsp; &nbsp; <a href="#h14">Botón Guardar todas las preguntas</a> <br>
            &nbsp; &nbsp; <a href="#h15">Botón Generar archivo</a> <br>
            <a href="#h16">Diagrama de clases</a> <br>
            &nbsp; &nbsp; <a href="#h17">Clase Cuestionario</a> <br>
            &nbsp; &nbsp; <a href="#h18">Clase Pregunta</a> <br>
				&nbsp; &nbsp; &nbsp; &nbsp; El método toHTMLDUl <br>
        <!-- ocultamos el contenido entre ocultar y finocultar -->
</div>
<!-- Sumario -->


<div id="contenido">

<!-- contenido -->
			<h1 id="h1">Práctica de Preguntas Moodle</h1>
			<p>
Práctica grupal de creación de preguntas para un cuestionario de la plataforma educativa Moodle.
</p>
<br>

			<h2 id="h2">Objetivo</h2>
			<p>
Crear una aplicación web que permita generar preguntas para la Moodle usando el formato GIFT.<br>
Referencia:<br>
<a href="https://docs.moodle.org/all/es/Formato_GIFT" title="https://docs.moodle.org/all/es/Formato_GIFT" class="https">https://docs.moodle.org/all/es/Formato_GIFT</a>
</p>
<br>
<p>
Ejemplo de cuestionario en formaro GIFT con tres preguntas:
</p>
<pre>
¿En qué año se produjo la revolución española de 1868 conocida como La gloriosa?
{
=1868
~%-25%1912
~%-25%1848
~%-25%1234
}

¿De qué color es el caballo blanco de Santiago?
{
=Blanco
~%-25%Negro
~%-25%Marrón
~%-25%Azul
}

Completa\: 20/2\=
{
=20/2\=10
~%-25%12 porque 12\:4*2\=20
~%-25%34
~%-25%2 \{porque 20 al revés es 02 \= 2\}
}
</pre>
<br>
<br>
<p>
Una pregunta en un cuestionario consta de:
</p>
<ul style='padding-left: 30pt'>
<li>texto</li>
<li>respuesta correcta</li>
<li>respuesta incorrecta 1 (resta un 25% de la nota de la pregunta)</li>
<li>respuesta incorrecta 2 (resta un 25% de la nota de la pregunta)</li>
<li>respuesta incorrecta 3 (resta un 25% de la nota de la pregunta)</li>
</ul>
<br>
<br>
<br>

			<h1 id="h3">Web inicial</h1>
			<p>
<b>Importante</b>: la web tiene que utilizar como codificación UTF-8. Moodle sólo acepta cuestionarios creados con esta codificación.
</p>
<br>
<p>
Crea una web que contenga los elementos que se describen a continuación. La presentación, organización de dichos elementos queda a criterio del grupo de alumnos.
</p>
<br>

			<h2 id="h4">Encabezado</h2>
			<p>
Un encabezado de primer nivel <tt>&lt;h1&gt;</tt> con el siguiente texto:
</p>
<br>
<p>
Cuestionarios para la moodle
</p>
<br>

			<h2 id="h5">Advertencia</h2>
			<p>
A continuación aparecerá una advertencia con el siguiente texto:
</p>
<br>
<p>
<b>Importante</b>: existen caracteres que no se pueden usar ni en las preguntas ni en las respuestas, pues tienen un significado especial en el formato GIFT de la spreguntas de Moodle (para más información visite la página del formato GIFT).
</p>
<br>
<p>
Los caracteres que hay que evitar son los siguientes:
</p>
<br>
<ul style='padding-left: 30pt'>
<li>~</li>
<li>#</li>
<li>=</li>
<li>}</li>
<li>{</li>
<li>:</li>
</ul>
<br>
<p>
Para evitar problemas, lo ideal sería no usar esos caracteres. En caso de que sea estrictamente necesario usarlos, se usará el caracter \ automáticamente para quitarles el significado especial. Por ejemplo, A = B + C ⇨ A \= B + C.
</p>
<br>
<p>
Imagen de ejemplo:<br>
<img src="./Práctica_de_Preguntas_Moodle_files/pasted_image.png">
</p>
<br>
<br>

			<h2 id="h6">Formulario</h2>
			<p>
A continuación tendremos un formulario que constará de:
</p>
<ul style='padding-left: 30pt'>
<li>Un <i>textarea</i> en el que se podrá escribir el texto de la pregunta.</li>
<li>Un <i>textbox</i> para indicar la respuesta correcta a la pregunta.</li>
<li>Tres <i>textboxes</i> para indicar tres respuestas que serán incorrectas.</li>
</ul>
<br>
<p>
Además tendremos una botonera con los siguientes botones:
</p>
<ul style='padding-left: 30pt'>
<li>Un botón <i>Crear pregunta</i></li>
<li>Un botón <i>Generar archivo</i></li>
<li>Un botón <i>Borrar todas las preguntas</i></li>
<li>Un botón de <i>Guardar todas las preguntas</i></li>
</ul>
<br>
<p>
Finalmente tendremos una división con <tt>id="divErrores"</tt> en el que se mostrarán los mensajes de error.
</p>
<br>

			<h2 id="h7">División de las preguntas</h2>
			<p>
Finalmente aparecerá una división con <tt>id="divPreguntas"</tt> en la que se mostrarán todas las preguntas creadas.
</p>
<br>
<br>
<br>

			<h1 id="h8">Funcionalidad</h1>
			<p>
A continuación se describe la funcionalidad mínima de la aplicación.
</p>
<br>

			<h2 id="h9">Inicio de la aplicación</h2>
			<p>
Al arrancar la aplicación se comprobará si hay un objeto de tipo <tt>Cuestionario</tt> guardado en el localStorage.  Si lo hay, se recupera (restaurándole los métodos) y se muestran las preguntas que contiene en la división <tt>divPreguntas</tt>. Para ello se usará sobre cada pregunta el método <tt>preguntaToHTMLDiv()</tt> que devolverá una división HTML con una pregunta formateada junto con sus respuestas.
</p>
<br>
<p>
Si no hay un cuestionario guardado se mostrará el mensaje <i>Todavía no hay preguntas creadas</i> y se creará un nuevo objeto de tipo <tt>Cuestionario</tt> vacío.
</p>
<br>
<p>
<b>Importante</b>: ver más adelante los métodos y propiedades de un objeto <tt>Cuestionario</tt>.
</p>
<br>

			<h2 id="h10">El botón Borrar todas las preguntas</h2>
			<p>
Al pulsarse el botón se eliminarán todas las preguntas del cuestionario que se encuentran en el localStorage y también se eliminarán del objeto <tt>Cuestionario</tt> y la división <tt>divPreguntas</tt> mostrará el mensaje <i>Todavía no hay preguntas creadas</i>.
</p>
<br>

			<h2 id="h11">El botón Crear pregunta</h2>
			<p>
Cuando se pulse el botón se comprobará si están rellenos todos los textboxes y el textarea. Si no es así se mostrará un mensaje de error en la división de errores y no se hará nada más.
</p>
<br>
<p>
Si todos los campos están rellenos, se procedará a <i>escapar</i> el texto de todos ellos. Este procedimiento consiste en reemplazar cada aparición de un caracter especial (los que tienen un significado especial en el formato GIFT) y anteponerles el caracter de escape delante <tt>\</tt>.<br>
Por ejemplo: 
</p>
<pre>
Completa: 20/2=
</pre>
<p>
Se transforma en:
</p>
<pre>
Completa\: 20/2\=
</pre>
<br>
<p>
A continuación se creará un objeto de tipo <tt>Pregunta</tt> que se añadirá al objeto <tt>Cuestionario</tt> mediante el método <tt>añadirPregunta()</tt>.
</p>
<br>
<p>
<b>Importante</b>: ver más adelante los métodos y propiedades de un objeto <tt>Pregunta</tt> y de un objeto <tt>Cuestionario</tt>.
</p>
<br>
<p>
Finalmente, la pregunta generada se mostrará en la división <tt>divPreguntas</tt> junto con dos botones nuevos: <i>Descartar pregunta</i> y <i>Recuperar pregunta</i>. Para esto se usará el método <tt>preguntaToHTMLDiv()</tt> del objeto <tt>Cuestionario</tt>. A esta división se le añadirán luego los dos botones (<i>Descartar pregunta</i> y <i>Recuperar pregunta</i>).
</p>
<br>
<p>
Imagen de ejemplo:<br>
<img src="./Práctica_de_Preguntas_Moodle_files/pasted_image001.png">
</p>
<br>
<br>

			<h2 id="h12">Botón Recuperar pregunta</h2>
			<p>
Cuando se pulse este botón, se recuperará el texto de la pregunta, la respuesta correcta y las erróneas de la pregunta guardada en el objeto <tt>Cuestionario</tt> mediante el método <tt>getPregunta()</tt> que devolverá un objeto de tipo <tt>Pregunta</tt> del que se podrán recuperar estos valores.<br>
A continaución se <i>desescapará</i> el texto (se quitará la <tt>\</tt> delante de los caracteres que fueron <i>escapados</i> al crear la pregunta) y se mostrarán en el textarea y los textboxes correspondientes.
</p>
<br>

			<h2 id="h13">Botón Descartar pregunta</h2>
			<p>
Cuando se pulse este botón, la pregunta será descartada y se eliminará del objeto <tt>Cuestionario</tt> mediante el método <tt>descartarPregunta()</tt> y<br>
y no se mostrará más en la división <tt>divPreguntas</tt> (sí se seguirán mostrando el resto de las preguntas).<br>
Si esta pregunta era la última que quedaba en el cuestionario, se mostrará en la división <tt>divPreguntas</tt> el mensaje <i>Todavía no hay preguntas creadas</i>.
</p>
<br>

			<h2 id="h14">Botón Guardar todas las preguntas</h2>
			<p>
Cuando se pulse este botón se almacenará el objeto <tt>Cuestionario</tt> con las preguntas que contiene en el localStorage.
</p>
<br>
<p>
<b>Importante</b>: Ten en cuenta que al stringificar un objeto a una cadena JSON sus métodos se perderán. JSON es un formato de intercambio de información y por tanto no puede contener métodos. Al recuperar el objeto se tendrá que reasignarle los métodos necesarios. 
</p>
<br>

			<h2 id="h15">Botón Generar archivo</h2>
			<p>
Cuando se pulse este botón se creará un fichero de texto con el contenido de las preguntas del localStorage que se podrá descargar.
</p>
<br>
<p>
Esto funcionará así:<br>
① Se declara un array <tt>arrContenido</tt> que contendrá las líneas que aparecerán en el fichero, por tanto, cada elemento del array será una cadena de caracteres terminada con un retorno de carro (<tt>"\n"</tt>).
</p>
<br>
<p>
② Cada pregunta está separada de la siguiente por un retorno de carro.
</p>
<br>
<p>
③ Una pregunta en el fichero tendrá esta forma:
</p>
<pre>
¿Qué hace la función Average (C6\:D6) en una hoja de cálculo?
{
=... calcula la media de los números contenidos en las celdas C6 hasta la D6.
~%-25%Calcula el promedio de los números contenidos en un documento de texto.
~%-25%Calcula la suma de los números contenidos en la fila 6.
~%-25%Esa función dará un error, puesto que el rango C6\:D6 es incorrecto.
}

</pre>
<br>
<p>
Es decir:
</p>
<ul style='padding-left: 30pt'>
<li>La primera línea es el texto de la pregunta</li>
<li>La segunda línea contiene sólo el símbolo de <tt>{</tt></li>
<li>La tercera línea es la de la respuesta correcta y comienza con un <tt>=</tt></li>
<li>Las siguientes líneas comienzan por <tt>~%-25%</tt> y el texto de cada respuesta incorrecta.</li>
<li>La pregunta terminará con el símbolo <tt>}</tt></li>
<li>Finalmente se añadirá un retorno de carro <tt>\n</tt> para separar la pregunta de la siguiente.</li>
</ul>
<br>
<p>
④  Ahora se creará el fichero y se añadirá un hiperenlace en alguna parte de la web. En el código de ejemplo de abajo se usa una división cuyo <tt>id</tt> es <tt>urlFichero</tt>.
</p>
<pre>
let fichero = new File(arrContenido, { type: "text/plain; charset=UTF-8" })
var url = window.URL.createObjectURL(fichero);
let divURL = document.querySelector('#urlFichero');
divURL.innerHTML = '&lt;a download="preguntas.txt" href="' + url + '"&gt;Descargar fichero (' + idPreguntas + ')&lt;/a&gt;'
</pre>
<br>
<br>
<br>

			<h1 id="h16">Diagrama de clases</h1>
			<p>
Este es el diagrama UML básico:<br>
<img src="./Práctica_de_Preguntas_Moodle_files/pasted_image002.png"><br>
Estas clases estarán implementadas en el fichero <tt>objetos.js</tt> que será enlazado desde el HTML de la página.<br>
Es obligatorio implementar todos los métodos y propiedades que aparecen.
</p>
<br>

			<h2 id="h17">Clase Cuestionario</h2>
			<p>
Al crearse un objeto de tipo <tt>Cuestionario</tt> el constructor generará un array vacío para almacenar las preguntas.
</p>
<br>
<p>
El método <tt>añadirPregunta()</tt> recibe un objeto de tipo <tt>Pregunta</tt> y lo guarda en el array.
</p>
<br>
<p>
El método <tt>descartarPregunta()</tt> recibe el <tt>id</tt> de la pregunta que se tendrá que eliminar del array.
</p>
<br>
<p>
El método <tt>getPregunta(i)</tt> devuelve el objeto de tipo <tt>Pregunta</tt> que tenga el <tt>id</tt> que se pasa como parámetro.
</p>
<br>
<p>
El método <tt>preguntaToHTMLDiv()</tt> recibe un <tt>id</tt> y devuelve en una división el resultado de llamar al método <tt>toHTMLUl()</tt> de la pregunta cuyo <tt>id</tt> se pasa como parámetro.
</p>
<br>
<br>

			<h2 id="h18">Clase Pregunta</h2>
			<p>
La clase <tt>Pregunta</tt> seguirá este patrón:<br>
En el constructor de la pregunta tendrán que aparecer todos los datos del objeto.
</p>
<br>
<br>

            
				<h3>El método toHTMLDUl<a id="el-método-tohtmldul" class="h_anchor"></a></h3>
<p>
El método <tt>toHTMLUl()</tt> devolverá un elemento <tt>&lt;ul&gt;</tt> que contendrá los datos de la pregunta (el texto, respuesta correcta y todas las incorrectas). Esta lista se usará desde el método <tt>preguntaToHTMLDiv()</tt> del cuestionario para poder insertarlo en la división <tt>divPreguntas</tt>.
</p>
<br>
<p>
<b>Notas</b>: 
</p>
<ul style='padding-left: 30pt'>
<li>Los botones para <i>Descartar</i> y <i>Recuperar</i> la pregunta serán agregados más adelante a esta división (no serán generados por este método).</li>
<li>Si todavía no se ha llegado a la parte de manipulación del DOM el método <tt>toHTMLUl()</tt> devolverá una cadena de caracteres para ser insertado con un <tt>innerHTML</tt>.</li>
<li>El texto que contienen los atributos de un objeto <tt>Pregunta</tt> tuvieron que ser <i>escapados</i> antes de guardarlos.</li>
</ul>
<br>
<p>
Este método deberá devolver algo parecido a esto (una vez aplicado el CSS):<br>
<img src="./Práctica_de_Preguntas_Moodle_files/pasted_image003.png">
</p>
<br>
<br>
<br>
<br>
<br>
<br>
 <br>




<!-- Wiki content -->

<!--
Lo separo con espacios entre el [ y el % para que no genere de nuevo el contenido
[ % FOR page IN pages % ]
	[ % page.content % ]
[ % END % ]
-->
<!-- End wiki content -->

</div>

<div id="volver">
    <a href="#">⬆️</a>
</div>

    <script defer>
    let ancho=90;
    btnAmpliar.addEventListener('click', e=>{
        ancho+=12;
        document.querySelector("#contenido").style.maxWidth = ancho+'ch';
        document.querySelector("#sumario").style.maxWidth = ancho+'ch';
    });
    btnReducir.addEventListener('click', e=>{
        ancho-=12;
        document.querySelector("#contenido").style.maxWidth = ancho+'ch';
        document.querySelector("#sumario").style.maxWidth = ancho+'ch';
    });
    
    let sumarioOculto = true;
    btnSumario.addEventListener('click', e=>{
        sumarioOculto = !sumarioOculto;
        if(sumarioOculto)document.querySelector("#sumario").style.display='none';
        else document.querySelector("#sumario").style.display='block'
    });
    
    
    //Resaltado de sintaxis
    // first, find all the div.code blocks
	document.querySelectorAll('div.zim-object pre code').forEach(el => {
		//el lenguaje de programación aparece el primero en la classlist
		let lang = el.classList[0];
  		// then highlight each
  		hljs.highlightElement(el,{language: lang});
	});


	//recorremos cada botón para el código que se ha generado.
	//el botón tiene un padre con el código (que es hermano del botón).
	document.querySelectorAll( "input.codigoboton").forEach( el =>{
	   let elemcodigo = el.parentElement.firstElementChild;
	   let resultado = el.parentElement.firstElementChild.nextElementSibling;
		el.addEventListener('click', e=>{ eval(elemcodigo.innerText); });
	});
   </script>
   <div id="pie">
   <p>Javier Mancera Fernández<br>
   <a href="https://www.twitch.tv/profesorinfo">https://www.twitch.tv/profesorinfo</a></p>
   </div>
</body>

</html>
